---
title: "Story 1.5: glossary-tooltip"
---

# Status

Done

# Story

As a non‑tech user,
I want tooltips for technical terms and a searchable Glossary Drawer,
so that I can understand terms without leaving my flow.

# Acceptance Criteria

1. Tooltip/Popover giải thích thuật ngữ kỹ thuật phổ biến
2. Glossary Drawer có tìm kiếm; liên kết chéo từ tooltip

# Tasks / Subtasks

- [x] Tooltip cho thuật ngữ (AC: 1)
  - [x] Trigger: Hover + Focus (desktop); Click cho touch [Source: docs/prd/accessibility.md]
  - [x] Placement: Inline cạnh thuật ngữ trong nội dung [Source: docs/prd/interaction-paradigms.md]
  - [x] Nội dung tooltip: giải thích ngắn gọn, bám ngôn ngữ hiện tại (vi/en) [Source: docs/prd/ux-vision.md]
  - [x] A11y: aria-describedby/labelledby, keyboard nav; đảm bảo contrast và focus ring [Source: docs/prd/accessibility.md]

- [x] Glossary Drawer (AC: 2)
  - [x] Toggle ở Header (góc phải) để mở/đóng drawer [Source: docs/prd/interaction-paradigms.md]
  - [x] Tìm kiếm client-side theo term/alias; filter realtime [Source: docs/prd/functional-fr.md]
  - [x] Cross-link: trong Tooltip có link “Xem chi tiết” mở Drawer và focus vào term tương ứng [Source: docs/prd/interaction-paradigms.md]
  - [x] A11y: role="dialog", aria-modal, trap focus; Esc đóng; trả focus về trigger [Source: docs/prd/accessibility.md]
  - [x] Toggle: dùng NÚT RIÊNG cho Glossary (không dùng chung toggle với Chat Drawer 1.4) để tránh xung đột hành vi

- [x] i18n
  - [x] `term`, `definition`, alias có vi/en; fallback `vi` nếu thiếu [Source: docs/prd/ux-vision.md, docs/prd/additional-assumptions.md]
  - [x] i18n keys (gợi ý): `glossaryTitle`, `glossarySearchPlaceholder`, `openGlossary`, `close`, `viewDetails`, `noResults`

- [x] Components & File Paths
  - [x] `web/src/components/glossary/GlossaryTooltip.tsx`
  - [x] `web/src/components/glossary/GlossaryDrawer.tsx`
  - [x] `web/src/lib/glossary.ts` (dataset: `term`, `aliases`, `definition` theo vi/en; fallback `vi`)

- [ ] Smoke Verification
  - [x] Tooltip hiển thị bằng Hover/Focus (desktop) và Click (touch); có thể đóng bằng Esc hoặc blur [Source: docs/prd/testing-requirements.md]
  - [x] Drawer mở/đóng qua toggle; trap focus đúng; search filter theo term/alias; cross-link từ Tooltip hoạt động [Source: docs/prd/testing-requirements.md]

# Dev Notes

- Previous Story Insights
  - Story 1.2 đã thiết lập i18n (vi mặc định), nên thuật ngữ/định nghĩa cần theo ngôn ngữ hiện tại và có fallback `vi`.
  - Story 1.4 đã có cơ chế dialog/drawer và focus trap mẫu; có thể tái sử dụng pattern cho Glossary Drawer.

- Data Models
  - No specific guidance found in architecture docs

- API Specifications
  - No specific guidance found in architecture docs

- Component Specifications
  - No specific guidance found in architecture docs

- File Locations
  - No specific guidance found in architecture docs

- Testing Requirements
  - No specific guidance found in architecture docs
  - Tham chiếu yêu cầu kiểm thử: [Source: docs/prd/testing-requirements.md]

- Technical Constraints
  - No specific guidance found in architecture docs
  - Ràng buộc liên quan (PRD): a11y (WCAG AA, keyboard, focus, aria), i18n vi/en; files‑only ở MVP [Source: docs/prd/accessibility.md, docs/prd/additional-assumptions.md]

### Project Structure Notes
- Không tìm thấy `docs/architecture/unified-project-structure.md`. Bám `docs/prd/repository-structure.md` (monorepo, giữ `docs/` và `.bmad-core/...`).

## Testing

- Approach: Unit + Integration (UI), lint + type‑check [Source: docs/prd/testing-requirements.md]
- Key scenarios:
  - Tooltip: Hover/Focus/Click hiển thị; Esc/blur ẩn; nội dung đúng ngôn ngữ
  - Drawer: Toggle mở/đóng; trap focus; search filter; cross-link từ Tooltip focus đúng entry
- Success criteria:
  - Đáp ứng AC 1–2; smoke test pass; lint/type‑check/build pass

# Change Log

| Date       | Version | Description                               | Author |
|------------|---------|-------------------------------------------|--------|
| 2025-08-09 | 0.1     | Khởi tạo bản nháp Story 1.5 (Draft)       | Bob    |
| 2025-08-09 | 0.2     | Checklist (YOLO) pass; set Ready for Review | Bob    |
| 2025-08-09 | 0.3     | Approve for implementation; Set Status → Approved | Sarah  |
| 2025-08-09 | 0.4     | Set Status → InProgress                         | Sarah  |
| 2025-08-09 | 0.5     | Implement Glossary Tooltip + Drawer; lint/tsc/build PASS | James |
| 2025-08-09 | 1.0     | Set Status → Done; QA smoke verified                    | James |

# Dev Agent Record

## Agent Model Used

GPT-5 (@dev)

## Debug Log References

Tạo `GlossaryDrawer` với trap focus cơ bản, search realtime theo term/alias, i18n strings; thêm `GlossaryTooltip` với hover/focus/click, Esc để đóng và liên kết “Xem chi tiết”. Bổ sung i18n keys (`glossaryTitle`, `glossarySearchPlaceholder`, `openGlossary`). Cập nhật `HeaderControls` để thêm nút Glossary riêng, không dùng chung toggle Chat Drawer.

## Completion Notes List

- Drawer và Tooltip hiển thị đúng, hỗ trợ keyboard cơ bản; i18n theo locale hiện tại; dataset tối thiểu hoạt động.

## File List

- `web/src/components/glossary/GlossaryDrawer.tsx` (new)
- `web/src/components/glossary/GlossaryTooltip.tsx` (new)
- `web/src/lib/glossary.ts` (new)
- `web/src/lib/i18n.ts` (edited)
- `web/src/components/HeaderControls.tsx` (edited)

# QA Results

- Lint: pass
- Type-check: pass
- Build: pass
- AC verification (smoke):
  - AC1 Tooltip: ĐẠT — Hover/Focus/Click hiển thị; Esc/blur ẩn; i18n theo locale
  - AC2 Drawer: ĐẠT — Toggle riêng; trap focus cơ bản; search realtime theo term/alias; i18n; liên kết “Xem chi tiết” từ Tooltip mở Drawer đúng
 - Impl notes:
   - `GlossaryTooltip` dùng `role="button"` + `tabIndex={0}` cho trigger; dialog popover có `role="dialog"`, không modal (aria-modal=false)
   - `GlossaryDrawer` có `role="dialog"`, `aria-modal`, trap focus tối thiểu; hỗ trợ ArrowUp/Down và Esc
   - `HeaderControls` thêm toggle Glossary riêng (không dùng chung với Chat Drawer) và lắng nghe sự kiện `open-glossary` từ Tooltip
