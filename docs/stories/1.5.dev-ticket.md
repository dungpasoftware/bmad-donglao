---
title: "Dev Ticket — Story 1.5: glossary-tooltip"
---

# Liên kết

- Story gốc: `docs/stories/1.5.glossary-tooltip.md`
- Epic: `docs/prd/epic-1-foundation-nontech-guided-shell.md` → Story 1.5

# Trạng thái

Open

# Phạm vi & Mục tiêu

Xây dựng Tooltip/Popover cho thuật ngữ kỹ thuật và Glossary Drawer có tìm kiếm, theo i18n (vi/en, fallback vi), đảm bảo a11y và keyboard navigation theo chuẩn WCAG AA. Không nối BE (files-only, dataset local).

# Dependencies

- 1.2 (i18n + keyboard nav): ĐÃ DONE → tái sử dụng `LocaleProvider`, `t(key, locale)`
- 1.4 (dialog/drawer patterns): ĐÃ DONE → tái sử dụng pattern focus trap/`role="dialog"`, Esc, return focus

# Components & File Paths

- `web/src/components/glossary/GlossaryTooltip.tsx`
- `web/src/components/glossary/GlossaryDrawer.tsx`
- `web/src/lib/glossary.ts` (dataset: `{ term, aliases: string[], definition }` cho `vi`/`en`; fallback `vi` nếu thiếu)

# i18n Keys (gợi ý)

- `glossaryTitle`, `glossarySearchPlaceholder`, `openGlossary`, `close`, `viewDetails`, `noResults`, `term`, `definition`

# A11y yêu cầu

- Tooltip: hỗ trợ Hover + Focus (desktop) và Click (touch); có thể đóng bằng Esc hoặc blur; dùng `aria-describedby`/`aria-labelledby` phù hợp; focus ring rõ; contrast đủ.
- Drawer: `role="dialog"`, `aria-modal`, `aria-labelledby`; trap focus; `Esc` đóng và trả focus về trigger; overlay chặn focus ngoài vùng.

# Tasks → AC Mapping

- [ ] Tooltip cho thuật ngữ (AC1)
  - [ ] Trigger: Hover + Focus (desktop), Click (touch)
  - [ ] Nội dung theo locale hiện tại, fallback `vi`
  - [ ] A11y: `aria-describedby/labelledby`, keyboard nav, contrast
- [ ] Glossary Drawer (AC2)
  - [ ] Toggle riêng ở Header để mở/đóng
  - [ ] Tìm kiếm client-side theo `term`/`aliases` (case-insensitive; optional: accent-insensitive)
  - [ ] Cross-link: từ Tooltip "Xem chi tiết" mở Drawer và focus vào term tương ứng
  - [ ] A11y: `role="dialog"`, `aria-modal`, trap focus, `Esc` đóng, return focus về trigger
- [ ] i18n dữ liệu và UI copy (AC1, AC2)

# Kế hoạch Test

- Unit
  - Tooltip trigger/close (Hover/Focus/Click/Esc)
  - Drawer trap focus + `Esc` restore focus
  - Search filter theo `term`/`aliases`
- Integration
  - Từ một nội dung mẫu có thuật ngữ → Hover/Focus hiển thị Tooltip; Click "Xem chi tiết" → mở Drawer và focus vào entry
  - Toggle Drawer ở Header → open/close; Tab/Shift+Tab loop trong Drawer; `Esc` đóng và trả focus về toggle
  - i18n: đổi locale → nội dung Tooltip/Drawer đổi theo
- Smoke
  - Lint, type-check, build pass; không warning/error trên console khi tương tác cơ bản

# PR Checklist (Definition of Done)

- [ ] Đạt toàn bộ Acceptance Criteria (AC1–AC2)
- [ ] Lint pass, type-check pass, build pass
- [ ] Tooltip: Hover/Focus/Click hiển thị; `Esc`/blur ẩn; a11y roles/labels đúng
- [ ] Drawer: `role="dialog"`, `aria-modal`, trap focus; `Esc` đóng; return focus
- [ ] Search: filter theo `term`/`aliases` (case-insensitive); (Optional) accent-insensitive
- [ ] Cross-link từ Tooltip → Drawer mở và focus đúng mục
- [ ] i18n: dữ liệu và UI copy hiển thị theo locale; fallback `vi` khi thiếu
- [ ] Không xuất hiện lỗi/warning mới trên console trong luồng chính
- [ ] Cập nhật `docs/stories/1.5.glossary-tooltip.md` → Status Done sau merge
